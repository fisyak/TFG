#! /usr/bin/env perl
use File::Basename;
use Cwd;
#             -       -       +       +       +       +       +       +       +       +       +       +       +
#my @list = qw(6020062 6021012 6032011 6034014 6044001 6045082 6048024 6049129 6051055 6057048 6061046 6063052 6064073);
#my @list = qw( 6012001 6012002 6012004 6012016 6012030 6012031 6012032 6012033 6012034 6012035 6012036 6012037 6013045
#	       6013065 6014101 6015022 6015033 6015048 6015060 6016016 6016052 6016053 6017010 6017011 6017059 6017066
#	       6018008 6018013 6018043 6020022 6020023 6020024 6020025 6020026 6020027 6020063 6021008 6021046 6022008
#	       6022047 6022091 6023010 6025039 6025051 6025113 6025114 6025122 6026019 6026047 6026062 6026063 6026064
#	       6026065 6026079 6026080 6026099 6027019 6027068 6028005 6028012 6028079 6029006 6029020 6029065 6030014
#	       6030063 6030064 6030095 6031007 6031035 6031036 6031112 6032012 6032033 6034011 6034018 6034019 6034110
#	       6034111 6035008 6035029 6035110 6036015 6036041 6036070 6036071 6036099 6036101 6037012 6037032 6037051
#	       6037072 6038010 6038038 6038039 6038040 6038041 6038042 6038086 6039030 6039047 6039048 6039049 6039050
#	       6039137 6040002 6040046 6040047 6040059 6040060 6041019 6041052 6041056 6041057 6041094 6042002 6042056
#	       6042068 6042106 6043013 6043053 6043088 6043116 6044023 6044052 6044082 6045032 6045074 6046021 6046036
#	       6046080 6046081 6046083 6046086 6046089 6046090 6046091 6046092 6046093 6046094 6047024 6047041 6048015
#	       6048026 6048078 6049035 6049093 6049120 6049121 6049122 6049125 6050014 6050038 6050118 6050133 6051019
#	       6051039 6051051 6051106 6051107 6051109 6052002 6052029 6052060 6052097 6053023 6053086 6054012 6054033
#	       6054065 6054066 6055010 6055029 6055087 6056064 6057044 6057045 6057061 6057089 6058012 6058034 6058060
#	       6058083 6059017 6059058 6059060 6060015 6060016 6060017 6060032 6060033 6060061 6061032 6062009 6062010
#	       6062011 6062012 6062016 6062017 6062018 6063050 6064038 6064055 6064083 6064101 6065019 6065020 6065040
#	       6065057 6069011 6069050 6069051 6069052 6069053 6069096 6070008 6070055 6070056 6070082 6071009 6071041
#	       6071070 6071090 6072016 6072036 6073011 6073040 6073041 6073042 6073068 6073069 6073070 6073071 6074001
#	       6074021 6074022 6074085 6074086 6075017 6075039 6075129 6075150 6076026 6076028 6076061 6076096 6076120
#	       6077035 6077066 6078010 6078040 6078069 6078081 6079006 6079018 6079050 6079099 6079100 6079122 6080008
#	       6080022 6080029 6080044 6081015 6081016 6081036 6081037 6081068 6081069 6081070 6081071 6082013 6082035
#	       6082061 6082062 6082063 6082064 6082065 6082086 6082087 6082088 6082089 6082102 6083016 );
#my @list = qw(
#	      6012001 6012002 6012004 6012016 6012030 6012031 6012032 6012033 6012034 6012035
#	      6012036 6012037 6013045 6013065 6014101 6015022 6015033 6015048 6015060 6016016
#	      6016052 6016053 6017010 6017011 6017059 6017066 6018008 6018013 6018043 6020022
#	      6020023 6020024 6020025 6020026 6020027 6020063 6021008 6021046 6022008 6022047
#	      6022091 6023010 6025039 6025051 6025113 6025114 6025122 6026019 6026047 6026062
#	      6026063 6026064 6026065 6026079 6026080 6026099 6027019 6027068 6028005 6028012
#	      6028079 6029006 6029020 6029065 6030014 6030063 6030064 6030095 6031007 6031035
#	      6031036 6031112 6032012 6032033 6034011 6034018 6034019 6034110 6034111 6035008
#	      6035029 6035110 6036015 6036041 6036070 6036071 6036099 6036101 6037012 6037032
#	      6037051 6037072 6038010 6038038 6038039 6038040 6038041 6038042 6038086 6039030
#	      6039047 6039048 6039049 6039050 6039137 6040002 6040046 6040047 6040059 6040060
#	      6041019 6041052 6041056 6041057 6041094 6042002 6042056 6042068 6042106 6043013
#	      6043053 6043088 6043116 6044023 6044052 6044082 6045032 6045074 6046021 6046036
#	      6046080 6046081 6046083 6046086 6046089 6046090 6046091 6046092 6046093 6046094
#	      6047024 6047041 6048015 6048026 6048078 6049035 6049093 6049120 6049121 6049122
#	      6049125 6050014 6050038 6050118 6050133 6051019 6051039 6051051 6051106 6051107
#	      6051109 6052002 6052029 6052060 6052097 6053023 6053086 6054012 6054033 6054065
#	      6054066 6055010 6055029 6055087 6056064 6057044 6057045 6057061 6057089 6058012
#	      6058034 6058060 6058083 6059017 6059058 6059060 6060015 6060016 6060017 6060032
#	      6060033 6060061 6061032 6062009 6062010 6062011 6062012 6062016 6062017 6062018
#	      6063050 6064038 6064055 6064083 6064101 6065019 6065020 6065040 6065057 6069011
#	      6069050 6069051 6069052 6069053 6069096 6070008 6070055 6070056 6070082 6071009
#	      6071041 6071070 6071090 6072016 6072036 6073011 6073040 6073041 6073042 6073068
#	      6073069 6073070 6073071 6074001 6074021 6074022 6074085 6074086 6075017 6075039
#	      6075129 6075150 6076026 6076028 6076061 6076096 6076120 6077035 6077066 6078010
#	      6078040 6078069 6078081 6079006 6079018 6079050 6079099 6079100 6079122 6080008
#	      6080022 6080029 6080044 6081015 6081016 6081036 6081037 6081068 6081069 6081070
#	      6081071 6082013 6082035 6082061 6082062 6082063 6082064 6082065 6082086 6082087
#	      6082088 6082089 6082102 6083016
#	     );
#my @list = qw(
#	      6015048 6017066 6025122 6029006 6029065 6031112 6034011 6036101 6038010 6038086
#	      6041056 6041057 6042068 6043116 6046036 6046090 6046094 6048026 6049120 6049125
#	      6052029);
#my @list = qw(6021012);
#my @list = qw(6030014 6030063 6030064 6030095 6031007 6031035 6031036 6031112 6032012 6032033 
#	      6034011 6034018 6034019 6034110 6034111 6035008 6035029 6035110);
#my @list = qw(6049129);
#my @list = qw(6069100 6073023 6081041);
my @list = qw(8159044 8159045 8159046 8159048);
my $pwd = cwd();
foreach my $set (@list) {
  my @digits = split '', $set;
  my $dir = $digits[1] . $digits[2] . $digits[3]; print "set = $set dir = $dir\n";
  if (! -d $dir) {mkdir $dir;}
  chdir($dir);
  if (! -d $set) {mkdir $set;}
  chdir($set);
  my $out = $dir . "_" . $set . "_" . "Physics.list"; print "out = $out\n";
#  my $out = $dir . "Laser.list"; print "out = $out\n";
#  my $ddir = "/home/starsink/raw/daq/2005/" . $dir;
  my $ddir = "/home/starsink/raw/daq/2007/" . $dir . "/" . $set;
  my $set = "st_physics_" . $set . "*.daq";
#  my $set = "st_laser_" . $set . "*.daq";
#  my $set = "st_physics_*.daq";
  if (! -r $out) {
    `hsi "cd $ddir; out $out; ls -1 $set";`
  }
  open (In, $out) or die "Can't open $out";
  my $no = 0;
  while (my $line = <In>) {
    my $File = $line;
    chomp($File);# print "File = $File\n";
    my $file =  File::Basename::basename($File);# print "file = $file\n";
    if (! -r $file) {
      print "get $File\n";
      `hsi get $File`;
    } else {
      print "$File has been read\n";
    }
    $no++;
#    if ($no > 50) {last;}
  }
  close (In);
  chdir($pwd);
}
